BootStrap: docker
From: rocker/rstudio

# Unlike utils::install.packages, pak::pkg_install handles system dependencies
# e.g. libxml2-dev for xml2 for tidyverse; rlbarter/superheat is a GitHub-only
# dependency of CytoExploreRData
%post
    apt update
    Rscript -e 'install.packages("pak"); library(pak)'
    Rscript -e 'pak::pkg_install("tidyverse"); library(tidyverse)'
    Rscript -e 'pak::pkg_install("BiocManager"); library(BiocManager)'
    Rscript -e 'BiocManager::install("cytolib"); library(cytolib)'
    Rscript -e 'BiocManager::install("flowCore"); library(flowCore)'
    Rscript -e 'BiocManager::install("openCyto"); library(openCyto)'
    Rscript -e 'BiocManager::install("flowWorkspace"); library(flowWorkspace)'
    Rscript -e 'pak::pkg_install("rlbarter/superheat"); library(superheat)'
    Rscript -e 'pak::pkg_install("DillonHammill/CytoExploreRData"); library(CytoExploreRData)'
    Rscript -e 'pak::pkg_install("DillonHammill/CytoExploreR"); library(CytoExploreR)'

%test
    rstudio-server version

%runscript
    /init
